import{_ as F}from"./JuQprmpf.js";import{a7 as H,d as I,W as h,X as K,M as W,K as z,E as y,a1 as J,D as f,o as l,c as d,e as a,t as n,b as s,f as m,i as c,Q as $,R,a as b,w as P,U as T,h as Q,j as X,k as G,S as Y}from"./Detppjeq.js";import{_ as Z}from"./SQETIF_a.js";const ee=H("/images/ht-logo.png"),se={class:"max-w-lg mx-auto my-16 lg:my-24"},te={class:"flex flex-col items-center"},oe={class:"text-xl font-semibold lg:text-3xl"},re={key:0,class:"my-2 text-center"},ae={key:1,class:"my-2 text-center"},ne={key:0,for:"email"},le=["placeholder"],ie={key:1,class:"text-sm text-gray-500"},ue={key:2},de={for:"username"},me=["placeholder"],ce={for:"password"},ge=["innerHTML"],pe=["innerHTML"],fe=I({__name:"LoginAndRegister",setup(ve){const{t:r}=h(),x=K(),k=W(),{loginUser:V,isPending:U,registerUser:A,sendResetPasswordEmail:C}=z(),p=y({email:"",password:"",username:""}),t=y("login"),v=y(""),i=y("");J(x,()=>{x.query.action==="forgotPassword"?t.value="forgotPassword":x.query.action==="register"?t.value="register":t.value="login"},{immediate:!0});const L=async o=>{const{success:e,error:g}=await V(o);switch(g){case"invalid_username":i.value=r("messages.error.invalidUsername");break;case"incorrect_password":i.value=r("messages.error.incorrectPassword");break;default:i.value=g;break}e&&(i.value="",v.value=r("messages.account.loggingIn"))},q=async o=>{if(t.value==="register"){const{success:e,error:g}=await A(o);e?(gtag("event","conversion",{send_to:"AW-16839371435/LThyCJrO95waEKvV0d0-",value:1,currency:"USD"}),i.value="",v.value=r("messages.account.accountCreated")+" "+r("messages.account.loggingIn"),setTimeout(()=>{L(o)},2e3)):i.value=g}else t.value==="forgotPassword"?M(o):L(o)},M=async o=>{const{success:e,error:g}=await C(o.email);e?(i.value="",v.value=r("messages.account.ifRegistered")):i.value=g},w=o=>{t.value=o,o==="forgotPassword"?k.push({query:{action:"forgotPassword"}}):o==="register"?k.push({query:{action:"register"}}):k.push({query:{}})},j=f(()=>{if(t.value==="login")return r("messages.account.loginToAccount");if(t.value==="register")return r("messages.account.accountRegister");if(t.value==="forgotPassword")return r("messages.account.forgotPassword")}),E=f(()=>{if(t.value==="login")return r("messages.account.login");if(t.value==="register")return r("messages.account.register");if(t.value==="forgotPassword")return r("messages.account.sendPasswordResetEmail")}),B=f(()=>t.value==="register"?r("messages.billing.email"):r("messages.account.emailOrUsername")),N=f(()=>t.value==="login"?r("messages.account.emailOrUsername"):r("messages.account.username")),O=f(()=>r("messages.account.password")),_=f(()=>({email:"johndoe@email.com",username:t.value==="login"?"johndoe@email.com":"johndoe",password:"********"}));return(o,e)=>{const g=F,S=G,D=Z;return l(),d("div",se,[a("div",te,[e[10]||(e[10]=a("img",{src:ee,alt:"Logo",class:"object-contain h-20 mb-4"},null,-1)),a("h1",oe,n(s(j)),1),s(t)==="login"?(l(),d("div",re,[m(n(o.$t("messages.account.noAccount"))+" ",1),a("a",{class:"font-semibold cursor-pointer text-brand-gold",onClick:e[0]||(e[0]=u=>w("register"))},n(o.$t("messages.account.accountRegister")),1),e[8]||(e[8]=m(". "))])):c("",!0),s(t)==="register"?(l(),d("div",ae,[m(n(o.$t("messages.account.hasAccount"))+" ",1),a("a",{class:"font-semibold cursor-pointer text-brand-gold",onClick:e[1]||(e[1]=u=>w("login"))},n(o.$t("messages.general.please"))+" "+n(o.$t("messages.account.accountLogin")),1),e[9]||(e[9]=m(" . "))])):c("",!0)]),a("form",{class:"mt-6",onSubmit:e[5]||(e[5]=X(u=>q(s(p)),["prevent"]))},[s(t)==="register"||s(t)==="forgotPassword"?(l(),d("label",ne,[m(n(s(B))+" ",1),e[11]||(e[11]=a("span",{class:"text-red-500"},"*",-1)),e[12]||(e[12]=m()),e[13]||(e[13]=a("br",null,null,-1)),$(a("input",{id:"email","onUpdate:modelValue":e[2]||(e[2]=u=>s(p).email=u),placeholder:s(_).email,autocomplete:"email",type:"text",required:""},null,8,le),[[R,s(p).email]])])):c("",!0),s(t)==="forgotPassword"?(l(),d("p",ie,n(o.$t("messages.account.enterEmailOrUsernameForReset")),1)):c("",!0),s(t)!=="forgotPassword"?(l(),d("div",ue,[a("label",de,[m(n(s(N))+" ",1),e[14]||(e[14]=a("span",{class:"text-red-500"},"*",-1)),e[15]||(e[15]=m()),e[16]||(e[16]=a("br",null,null,-1)),$(a("input",{id:"username","onUpdate:modelValue":e[3]||(e[3]=u=>s(p).username=u),placeholder:s(_).username,autocomplete:"username",type:"text",required:""},null,8,me),[[R,s(p).username]])]),a("label",ce,[m(n(s(O))+" ",1),e[17]||(e[17]=a("span",{class:"text-red-500"},"*",-1)),e[18]||(e[18]=m()),e[19]||(e[19]=a("br",null,null,-1)),b(g,{id:"password",className:"border rounded-lg w-full p-3 px-4 bg-white",modelValue:s(p).password,"onUpdate:modelValue":e[4]||(e[4]=u=>s(p).password=u),placeholder:s(_).password,autocomplete:s(t)==="login"?"current-password":"new-password",required:!0},null,8,["modelValue","placeholder","autocomplete"])])])):c("",!0),b(T,{name:"scale-y",mode:"out-in"},{default:P(()=>[s(v)?(l(),d("div",{key:0,class:"my-4 text-sm text-green-500",innerHTML:s(v)},null,8,ge)):c("",!0)]),_:1}),b(T,{name:"scale-y",mode:"out-in"},{default:P(()=>[s(i)?(l(),d("div",{key:0,class:"my-4 text-sm text-red-500",innerHTML:s(i)},null,8,pe)):c("",!0)]),_:1}),b(D,{class:"flex items-center justify-center gap-4 mt-4 text-lg"},{default:P(()=>[s(U)?(l(),Q(S,{key:0,stroke:"4",size:"16",color:"#fff"})):c("",!0),a("span",null,n(s(E)),1)]),_:1})],32),s(t)==="login"?(l(),d("div",{key:0,class:"my-8 text-center cursor-pointer hover:text-brand-gold",onClick:e[6]||(e[6]=u=>w("forgotPassword"))},n(o.$t("messages.account.forgotPassword")),1)):c("",!0),s(t)==="forgotPassword"?(l(),d("div",{key:1,class:"my-8 text-center cursor-pointer",onClick:e[7]||(e[7]=u=>w("login"))},n(o.$t("messages.account.backToLogin")),1)):c("",!0)])}}}),ke=Object.assign(Y(fe,[["__scopeId","data-v-ad79d4b2"]]),{__name:"LoginAndRegister"});export{ke as default};
