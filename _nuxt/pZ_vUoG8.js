import{J as ce,K as ne,u as I,L as Ue,M as Te,N as Le,O as Pe,d as H,P as oe,o as r,c as p,e as t,t as u,Q as w,R as S,b as e,i as y,a as $,S as _e,F as q,r as ee,x as le,s as ge,_ as te,D as ae,p as he,h as A,E as j,T as Ae,j as ye,w as P,U as Z,k as ie,f as F,V as Ie,W as De,X as Ne,G as Oe,H as je,Y as qe,n as He,Z as pe,$ as ze,g as Be,a0 as Ge}from"./BLkY2haE.js";import{_ as Re}from"./COCAthFp.js";import{_ as We}from"./BbpQX2NH.js";import{_ as ve,a as be}from"./CJDhtlJT.js";import{a as Ye}from"./BtF3cKlW.js";import"./Db4VpTG8.js";const Ke=window.setInterval;function re(){const m=ce("orderInput",()=>({customerNote:"",paymentMethod:"",shipToDifferentAddress:!1,metaData:[{key:"order_via",value:"WooNuxt"}]})),l=ce("isProcessingOrder",()=>!1);async function i(){var c;const{customer:n,viewer:d}=ne(),{isUpdatingCart:h,refreshCart:a}=I();h.value=!0;try{const{updateCustomer:f}=await Ue({input:{id:(c=d==null?void 0:d.value)==null?void 0:c.id,shipping:m.value.shipToDifferentAddress?n.value.shipping:n.value.billing,billing:n.value.billing}});f&&a()}catch(f){console.error(f)}}function o(n){return new Promise(d=>{const c=window.innerWidth/2-375,f=window.innerHeight/2-750/2+80,v=window.open(n,"",`width=750,height=750,top=${f},left=${c}`),k=Ke(()=>{v!=null&&v.closed&&(clearInterval(k),d(!0))},500)})}return{orderInput:m,isProcessingOrder:l,proccessCheckout:async(n=!1)=>{var E,M,O,B,J;const{customer:d,loginUser:h}=ne(),a=Te(),{replaceQueryParam:c}=Le(),{emptyCart:f,refreshCart:v}=I();l.value=!0;const{username:k,password:z,shipToDifferentAddress:D}=m.value,N=(E=d.value)==null?void 0:E.billing,se=D?(M=d.value)==null?void 0:M.shipping:N;try{let U={billing:N,shipping:se,metaData:m.value.metaData,paymentMethod:m.value.paymentMethod.id,customerNote:m.value.customerNote,shipToDifferentAddress:D,transactionId:m.value.transactionId,isPaid:n};m.value.createAccount&&(U.account={username:k,password:z});const{checkout:b}=await Pe(U);m.value.createAccount&&await h({username:k,password:z});const G=(O=b==null?void 0:b.order)==null?void 0:O.databaseId,R=(B=b==null?void 0:b.order)==null?void 0:B.orderKey,W=m.value.paymentMethod.id,g=W==="paypal"||W==="ppcp-gateway";if(await(b==null?void 0:b.redirect)&&g){const _=window.location.origin;let C=(b==null?void 0:b.redirect)??"";const T=`${_}/checkout/order-received/${G}/?key=${R}&from_paypal=true`,V=`${_}/checkout/?cancel_order=true&from_paypal=true`;C=c("return",T,C),C=c("cancel_return",V,C),C=c("bn","WooNuxt_Cart",C),await o(C)&&a.push(`/checkout/order-received/${G}/?key=${R}&fetch_delay=true`)}else a.push(`/checkout/order-received/${G}/?key=${R}`);if(await(b==null?void 0:b.result)!=="success")return alert("There was an error processing your order. Please try again."),window.location.reload(),b;await f(),await v()}catch(U){l.value=!1;const b=(J=U==null?void 0:U.gqlErrors)==null?void 0:J[0].message;return b!=null&&b.includes("An account is already registered with your email address")?(alert("An account is already registered with your email address"),null):(alert(b),null)}l.value=!1},updateShippingLocation:i}}const Fe={class:"grid w-full gap-4 lg:grid-cols-2"},Ze={class:"w-full"},Je={for:"first-name"},Xe={class:"w-full"},Qe={for:"last-name"},et={key:0,class:"w-full col-span-full"},tt={for:"address1"},st={key:1,class:"w-full col-span-full"},nt={for:"address2"},ot={key:2,class:"w-full"},lt={for:"city"},at={key:3,class:"w-full"},it={for:"state"},rt={key:4,class:"w-full"},dt={for:"country"},ut={key:5,class:"w-full"},ct={for:"zip"},pt={key:6,class:"w-full col-span-full"},mt={for:"phone"},ft=H({__name:"BillingDetails",props:{modelValue:{type:Object,required:!0}},setup(m){const{updateShippingLocation:l}=re(),{isBillingAddressEnabled:i}=I(),s=oe(m,"modelValue");return(n,d)=>{const h=ve,a=be;return r(),p("div",Fe,[t("div",Ze,[t("label",Je,u(n.$t("messages.billing.firstName")),1),w(t("input",{id:"first-name","onUpdate:modelValue":d[0]||(d[0]=c=>e(s).firstName=c),placeholder:"John",autocomplete:"given-name",type:"text",required:""},null,512),[[S,e(s).firstName]])]),t("div",Xe,[t("label",Qe,u(n.$t("messages.billing.lastName")),1),w(t("input",{id:"last-name","onUpdate:modelValue":d[1]||(d[1]=c=>e(s).lastName=c),placeholder:"Doe",autocomplete:"family-name",type:"text",required:""},null,512),[[S,e(s).lastName]])]),e(i)?(r(),p("div",et,[t("label",tt,u(n.$t("messages.billing.address1")),1),w(t("input",{id:"address1","onUpdate:modelValue":d[2]||(d[2]=c=>e(s).address1=c),placeholder:"O'Connell Street 47",autocomplete:"street-address",type:"text",required:""},null,512),[[S,e(s).address1]])])):y("",!0),e(i)?(r(),p("div",st,[t("label",nt,u(n.$t("messages.billing.address2"))+" ("+u(n.$t("messages.general.optional"))+")",1),w(t("input",{id:"address2","onUpdate:modelValue":d[3]||(d[3]=c=>e(s).address2=c),placeholder:"Apartment, studio, or floor",autocomplete:"address-line2",type:"text"},null,512),[[S,e(s).address2]])])):y("",!0),e(i)?(r(),p("div",ot,[t("label",lt,u(n.$t("messages.billing.city")),1),w(t("input",{id:"city","onUpdate:modelValue":d[4]||(d[4]=c=>e(s).city=c),placeholder:"New York",autocomplete:"locality",type:"text",required:""},null,512),[[S,e(s).city]])])):y("",!0),e(i)?(r(),p("div",at,[t("label",it,u(n.$t("messages.billing.state"))+" ("+u(n.$t("messages.general.optional"))+")",1),$(h,{id:"state",modelValue:e(s).state,"onUpdate:modelValue":d[5]||(d[5]=c=>e(s).state=c),"default-value":e(s).state,"country-code":e(s).country,onChange:e(l),autocomplete:"address-level1"},null,8,["modelValue","default-value","country-code","onChange"])])):y("",!0),e(i)?(r(),p("div",rt,[t("label",dt,u(n.$t("messages.billing.country")),1),$(a,{id:"country",modelValue:e(s).country,"onUpdate:modelValue":d[6]||(d[6]=c=>e(s).country=c),"default-value":e(s).country,onChange:e(l),autocomplete:"country"},null,8,["modelValue","default-value","onChange"])])):y("",!0),e(i)?(r(),p("div",ut,[t("label",ct,u(n.$t("messages.billing.zip")),1),w(t("input",{id:"zip","onUpdate:modelValue":d[7]||(d[7]=c=>e(s).postcode=c),placeholder:"10001",autocomplete:"postal-code",type:"text",required:""},null,512),[[S,e(s).postcode]])])):y("",!0),e(i)?(r(),p("div",pt,[t("label",mt,u(n.$t("messages.billing.phone"))+" ("+u(n.$t("messages.general.optional"))+")",1),w(t("input",{id:"phone","onUpdate:modelValue":d[8]||(d[8]=c=>e(s).phone=c),placeholder:"+1 234 567 8901",autocomplete:"tel",type:"tel"},null,512),[[S,e(s).phone]])])):y("",!0)])}}}),_t=Object.assign(ft,{__name:"BillingDetails"}),gt={class:"grid w-full gap-4 lg:grid-cols-2"},ht={class:"w-full"},yt={for:"first-name"},vt={class:"w-full"},bt={for:"last-name"},$t={class:"w-full col-span-full"},wt={for:"address1"},xt={class:"w-full col-span-full"},kt={for:"address2"},St={class:"w-full"},Ct={for:"city"},Vt={class:"w-full"},Et={for:"state"},Mt={class:"w-full"},Ut={for:"country"},Tt={class:"w-full"},Lt={for:"zip"},Pt={class:"w-full col-span-full"},At={for:"phone"},It=H({__name:"ShippingDetails",props:{modelValue:{type:Object,required:!0}},setup(m){const{updateShippingLocation:l}=re(),o=oe(m,"modelValue");return(s,n)=>{const d=ve,h=be;return r(),p("div",gt,[t("div",ht,[t("label",yt,u(s.$t("messages.billing.firstName")),1),w(t("input",{id:"first-name","onUpdate:modelValue":n[0]||(n[0]=a=>e(o).firstName=a),placeholder:"John",autocomplete:"given-name",type:"text",required:""},null,512),[[S,e(o).firstName]])]),t("div",vt,[t("label",bt,u(s.$t("messages.billing.lastName")),1),w(t("input",{id:"last-name","onUpdate:modelValue":n[1]||(n[1]=a=>e(o).lastName=a),placeholder:"Doe",autocomplete:"family-name",type:"text",required:""},null,512),[[S,e(o).lastName]])]),t("div",$t,[t("label",wt,u(s.$t("messages.billing.address1")),1),w(t("input",{id:"address1","onUpdate:modelValue":n[2]||(n[2]=a=>e(o).address1=a),placeholder:"O'Connell Street 47",autocomplete:"street-address",type:"text",required:""},null,512),[[S,e(o).address1]])]),t("div",xt,[t("label",kt,u(s.$t("messages.billing.address2"))+" ("+u(s.$t("messages.general.optional"))+")",1),w(t("input",{id:"address2","onUpdate:modelValue":n[3]||(n[3]=a=>e(o).address2=a),placeholder:"Apartment, studio, or floor",autocomplete:"address-line2",type:"text"},null,512),[[S,e(o).address2]])]),t("div",St,[t("label",Ct,u(s.$t("messages.billing.city")),1),w(t("input",{id:"city","onUpdate:modelValue":n[4]||(n[4]=a=>e(o).city=a),placeholder:"New York",autocomplete:"locality",type:"text",required:""},null,512),[[S,e(o).city]])]),t("div",Vt,[t("label",Et,u(s.$t("messages.billing.state"))+" ("+u(s.$t("messages.general.optional"))+")",1),$(d,{id:"state",modelValue:e(o).state,"onUpdate:modelValue":n[5]||(n[5]=a=>e(o).state=a),"default-value":e(o).state,"country-code":e(o).country,onChange:e(l)},null,8,["modelValue","default-value","country-code","onChange"])]),t("div",Mt,[t("label",Ut,u(s.$t("messages.billing.country")),1),$(h,{id:"country",modelValue:e(o).country,"onUpdate:modelValue":n[6]||(n[6]=a=>e(o).country=a),"default-value":e(o).country,onChange:e(l)},null,8,["modelValue","default-value","onChange"])]),t("div",Tt,[t("label",Lt,u(s.$t("messages.billing.zip")),1),w(t("input",{id:"zip","onUpdate:modelValue":n[7]||(n[7]=a=>e(o).postcode=a),placeholder:"10001",autocomplete:"postal-code",type:"text",required:""},null,512),[[S,e(o).postcode]])]),t("div",Pt,[t("label",At,u(s.$t("messages.billing.phone"))+" ("+u(s.$t("messages.general.optional"))+")",1),w(t("input",{id:"phone","onUpdate:modelValue":n[8]||(n[8]=a=>e(o).phone=a),placeholder:"+1 234 567 8901",autocomplete:"tel",type:"tel"},null,512),[[S,e(o).phone]])])])}}}),Dt=Object.assign(It,{__name:"ShippingDetails"}),Nt={class:"grid gap-4 shipping-options"},Ot=["onClick"],jt=["innerHTML"],qt={class:"font-semibold text-gray-600"},Ht={__name:"ShippingOptions",props:{options:{type:Array,required:!0},activeOption:{type:String,required:!0}},setup(m){var n;const{updateShippingMethod:l}=I(),i=ge(),o=((n=i==null?void 0:i.public)==null?void 0:n.CURRENCY_SYMBOL)||"$",s=async d=>{await l(d)};return(d,h)=>{const a=te;return r(),p("div",Nt,[(r(!0),p(q,null,ee(m.options,c=>(r(),p("div",{key:c.id,class:le(["flex items-center justify-between option",{"active-option":c.id===m.activeOption}]),onClick:f=>s(c.id)},[t("div",null,[t("div",{class:"text-sm leading-tight text-gray-500",innerHTML:c.label},null,8,jt),t("div",qt,u(e(o))+u(c.cost),1)]),$(a,{name:"ion:checkmark-circle",size:"20",class:"ml-auto text-brand-gold checkmark opacity-0"})],10,Ot))),128))])}}},zt=_e(Ht,[["__scopeId","data-v-8ba09eac"]]),Bt={class:"flex gap-4 leading-tight flex-wrap"},Gt=["onClick","title"],Rt=["innerHTML"],Wt={key:0,class:"prose block w-full"},Yt=["innerHTML"],Kt=H({__name:"PaymentOptions",props:{modelValue:{},paymentGateways:{}},emits:["update:modelValue"],setup(m,{emit:l}){const i=m,o=oe(i,"modelValue"),s=ae(()=>o.value),n=l,d=h=>{n("update:modelValue",h)};return he(()=>{var h,a;(h=i.paymentGateways)!=null&&h.nodes.length&&d((a=i.paymentGateways)==null?void 0:a.nodes[0])}),(h,a)=>{var f;const c=te;return r(),p("div",Bt,[(r(!0),p(q,null,ee((f=h.paymentGateways)==null?void 0:f.nodes,v=>(r(),p("div",{key:v.id,class:le(["option",{"active-option":v.id===e(s).id}]),onClick:k=>d(v),title:(v==null?void 0:v.description)||(v==null?void 0:v.title)||"Payment Method"},[v.id==="stripe"?(r(),A(c,{key:0,name:"ion:card-outline",size:"20"})):v.id==="paypal"?(r(),A(c,{key:1,name:"ion:logo-paypal",size:"20"})):(r(),A(c,{key:2,name:"ion:cash-outline",size:"20"})),t("span",{class:"whitespace-nowrap",innerHTML:v.title},null,8,Rt),$(c,{name:"ion:checkmark-circle",size:"20",class:"ml-auto text-brand-gold checkmark opacity-0"})],10,Gt))),128)),e(s).description?(r(),p("div",Wt,[t("p",{class:"text-sm text-gray-500",innerHTML:e(s).description},null,8,Yt)])):y("",!0)])}}}),Ft=Object.assign(_e(Kt,[["__scopeId","data-v-ebed9aa5"]]),{__name:"PaymentOptions"}),Zt={id:"card-element"},Jt=H({__name:"StripeElement",props:["stripe"],emits:["updateElement"],setup(m,{emit:l}){const{cart:i}=I(),o=ae(()=>i.value&&parseFloat(i.value.rawTotal)*100),s=l;let n=null;const d={mode:"payment",currency:"eur",amount:o.value},h=async()=>{n=m.stripe.elements(d),n.create("card",{hidePostalCode:!0}).mount("#card-element"),s("updateElement",n)};return he(()=>{h()}),(a,c)=>(r(),p("div",Zt))}}),Xt=Object.assign(Jt,{__name:"StripeElement"}),Qt=["placeholder"],es=["disabled"],ts={key:1},ss=["innerHTML"],ns={key:0,class:"text-xs font-semibold uppercase flex flex-wrap gap-2"},os={key:0,class:"bg-brand-gold border-brand-gold border rounded-md flex bg-opacity-5 border-opacity-10 text-brand-gold leading-none p-1.5 gap-1 items-center"},ls=["innerHTML"],as=H({__name:"AddCoupon",setup(m){const{cart:l,isUpdatingCoupon:i,applyCoupon:o,removeCoupon:s}=I(),n=j(""),d=j("");async function h(){const{message:a}=await o(n.value);a?d.value=a:(n.value="",d.value="")}return(a,c)=>{const f=ie,v=te;return r(),p("div",null,[t("form",{class:"flex gap-1",onSubmit:ye(h,["prevent"])},[w(t("input",{id:"couponCode","onUpdate:modelValue":c[0]||(c[0]=k=>Ae(n)?n.value=k:null),type:"text",placeholder:a.$t("messages.shop.couponCode"),class:"w-full px-4 py-2 bg-white border border-gray-300 rounded-md shadow-sm outline-none",required:""},null,8,Qt),[[S,e(n)]]),t("button",{class:"flex items-center justify-center px-4 py-2 text-white bg-gray-800 border rounded-md shadow-sm outline-none min-w-20",disabled:e(i)},[e(i)?(r(),A(f,{key:0,color:"#fff",size:"16"})):(r(),p("span",ts,u(a.$t("messages.general.apply")),1))],8,es)],32),$(Z,{name:"scale-y",mode:"out-in"},{default:P(()=>[e(d)?(r(),p("div",{key:0,class:"mt-2 text-xs text-red-600",innerHTML:e(d)},null,8,ss)):y("",!0)]),_:1}),$(Z,{name:"scale-y",mode:"out-in"},{default:P(()=>[e(l)&&e(l).appliedCoupons?(r(),p("div",ns,[(r(!0),p(q,null,ee(e(l).appliedCoupons,(k,z)=>(r(),p("div",{key:(k==null?void 0:k.code)||z,class:"flex flex-wrap mt-2 flex-2"},[k!=null&&k.code?(r(),p("div",os,[t("span",{innerHTML:k.code},null,8,ls),$(v,{name:"ion:close",class:"rounded-full cursor-pointer hover:bg-brand-gold hover:text-white",onClick:D=>e(s)(k.code)},null,8,["onClick"])])):y("",!0)]))),128))])):y("",!0)]),_:1})])}}}),is=Object.assign(as,{__name:"AddCoupon"}),rs={key:0,class:"bg-white rounded-lg shadow-lg mb-8 w-full min-h-[280px] p-4 sm:p-8 relative md:max-w-md md:top-32 md:sticky"},ds={class:"mb-6 text-xl font-semibold leading-none"},us={class:"flex flex-col gap-4 overflow-y-auto"},cs={class:"grid gap-1 text-sm font-semibold text-gray-500"},ps={class:"flex justify-between"},ms=["innerHTML"],fs={class:"flex justify-between"},_s={class:"text-gray-700 tabular-nums"},gs={key:0,class:"flex justify-between"},hs={class:"text-brand-gold tabular-nums"},ys=["innerHTML"],vs={class:"flex justify-between mt-4"},bs=["innerHTML"],$s={key:0,class:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-50"},ws={__name:"OrderSummary",setup(m){const{cart:l,isUpdatingCart:i}=I();return(o,s)=>{const n=Ye,d=is,h=ie;return e(l)?(r(),p("aside",rs,[t("h2",ds,u(o.$t("messages.shop.orderSummary")),1),t("ul",us,[(r(!0),p(q,null,ee(e(l).contents.nodes,a=>(r(),A(n,{key:a.key,item:a},null,8,["item"]))),128))]),$(d,{class:"my-8"}),t("div",cs,[t("div",ps,[t("span",null,u(o.$t("messages.shop.subtotal")),1),t("span",{class:"text-gray-700 tabular-nums",innerHTML:e(l).subtotal},null,8,ms)]),t("div",fs,[t("span",null,u(o.$t("messages.general.shipping")),1),t("span",_s,u(parseFloat(e(l).shippingTotal)>0?"+":"")+" "+u(e(l).shippingTotal),1)]),$(Z,{name:"scale-y",mode:"out-in"},{default:P(()=>[e(l)&&e(l).appliedCoupons?(r(),p("div",gs,[t("span",null,u(o.$t("messages.shop.discount")),1),t("span",hs,[s[0]||(s[0]=F("- ")),t("span",{innerHTML:e(l).discountTotal},null,8,ys)])])):y("",!0)]),_:1}),t("div",vs,[t("span",null,u(o.$t("messages.shop.total")),1),t("span",{class:"text-lg font-bold text-gray-700 tabular-nums",innerHTML:e(l).total},null,8,bs)])]),Ie(o.$slots,"default"),e(i)?(r(),p("div",$s,[$(h)])):y("",!0)])):y("",!0)}}};var $e="https://js.stripe.com/v3",xs=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,me="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",ks=function(){for(var l=document.querySelectorAll('script[src^="'.concat($e,'"]')),i=0;i<l.length;i++){var o=l[i];if(xs.test(o.src))return o}return null},fe=function(l){var i="",o=document.createElement("script");o.src="".concat($e).concat(i);var s=document.head||document.body;if(!s)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return s.appendChild(o),o},Ss=function(l,i){!l||!l._registerWrapper||l._registerWrapper({name:"stripe-js",version:"4.6.0",startTime:i})},Y=null,X=null,Q=null,Cs=function(l){return function(){l(new Error("Failed to load Stripe.js"))}},Vs=function(l,i){return function(){window.Stripe?l(window.Stripe):i(new Error("Stripe.js not available"))}},Es=function(l){return Y!==null?Y:(Y=new Promise(function(i,o){if(typeof window>"u"||typeof document>"u"){i(null);return}if(window.Stripe&&l&&console.warn(me),window.Stripe){i(window.Stripe);return}try{var s=ks();if(s&&l)console.warn(me);else if(!s)s=fe(l);else if(s&&Q!==null&&X!==null){var n;s.removeEventListener("load",Q),s.removeEventListener("error",X),(n=s.parentNode)===null||n===void 0||n.removeChild(s),s=fe(l)}Q=Vs(i,o),X=Cs(o),s.addEventListener("load",Q),s.addEventListener("error",X)}catch(d){o(d);return}}),Y.catch(function(i){return Y=null,Promise.reject(i)}))},Ms=function(l,i,o){if(l===null)return null;var s=l.apply(void 0,i);return Ss(s,o),s},K,we=!1,xe=function(){return K||(K=Es(null).catch(function(l){return K=null,Promise.reject(l)}),K)};Promise.resolve().then(function(){return xe()}).catch(function(m){we||console.warn(m)});var Us=function(){for(var l=arguments.length,i=new Array(l),o=0;o<l;o++)i[o]=arguments[o];we=!0;var s=Date.now();return xe().then(function(n){return Ms(n,i,s)})};const Ts={class:"flex flex-col min-h-[600px]"},Ls={key:0,class:"flex flex-col items-center justify-center flex-1 mb-12"},Ps={class:"text-2xl font-bold mb-2"},As={class:"text-gray-400 mb-4"},Is={class:"grid w-full max-w-2xl gap-8 checkout-form md:flex-1"},Ds={key:0},Ns={class:"w-full mt-4"},Os={for:"email"},js={key:0,class:"mt-1 text-sm text-red-500"},qs={class:"w-full mt-4"},Hs={for:"username"},zs={key:0,class:"w-full my-2"},Bs={for:"email"},Gs={key:1,class:"flex items-center gap-2 my-2"},Rs={class:"w-full mb-3 text-2xl font-semibold"},Ws={key:1,for:"shipToDifferentAddress",class:"flex items-center gap-2"},Ys={key:0},Ks={class:"mb-4 text-xl font-semibold"},Fs={key:2},Zs={class:"mb-4 text-xl font-semibold"},Js={key:3,class:"mt-2 col-span-full"},Xs={class:"mb-4 text-xl font-semibold"},Qs={class:"mb-4 text-xl font-semibold"},en=["placeholder"],tn=["disabled"],dn=H({__name:"checkout",async setup(m){var W;let l,i;const{t:o}=De(),{query:s}=Ne(),{cart:n,isUpdatingCart:d,paymentGateways:h}=I(),{customer:a,viewer:c}=ne(),{orderInput:f,isProcessingOrder:v,proccessCheckout:k}=re(),D=((W=ge().public)==null?void 0:W.STRIPE_PUBLISHABLE_KEY)||null,N=j(v.value?o("messages.general.processing"):o("messages.shop.checkoutButton")),se=ae(()=>v.value||d.value||!f.value.paymentMethod),E=j(!1),M=D?([l,i]=Oe(()=>Us(D)),l=await l,i(),l):null,O=j(),B=j(!1);je({script:[{innerHTML:`
            gtag('event', 'conversion', {'send_to': 'AW-16839371435/DzyfCO376pYaEKvV0d0-'});
            `}]}),qe(async()=>{s.cancel_order&&window.close()});const J=async()=>{var C;N.value=o("messages.general.processing");const{stripePaymentIntent:g}=await Ge(),_=(g==null?void 0:g.clientSecret)||"";try{if(f.value.paymentMethod.id==="stripe"&&M&&O.value){const T=O.value.getElement("card"),{setupIntent:V}=await M.confirmCardSetup(_,{payment_method:{card:T}}),{source:L}=await M.createSource(T);L&&f.value.metaData.push({key:"_stripe_source_id",value:L.id}),V&&f.value.metaData.push({key:"_stripe_intent_id",value:V.id}),B.value=(V==null?void 0:V.status)==="succeeded"||!1,f.value.transactionId=((C=L==null?void 0:L.created)==null?void 0:C.toString())||new Date().getTime().toString()}}catch(T){console.error(T),N.value=o("messages.shop.placeOrder")}k(B.value)},U=g=>{O.value=g},b=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/,G=g=>{g&&(E.value=!b.test(g))},R=g=>{g&&E.value&&(E.value=!b.test(g))};return He({title:o("messages.shop.checkout")}),(g,_)=>{var ue;const C=te,T=Re,V=Be,L=We,ke=_t,Se=Dt,Ce=zt,Ve=Ft,Ee=Xt,de=ie,Me=ws;return r(),p("div",Ts,[e(n)&&e(a)?(r(),p(q,{key:0},[e(n).isEmpty?(r(),p("div",Ls,[$(C,{name:"ion:cart-outline",size:"156",class:"opacity-25 mb-5"}),t("h2",Ps,u(g.$t("messages.shop.cartEmpty")),1),t("span",As,u(g.$t("messages.shop.addProductsInYourCart")),1),$(V,{to:"/products",class:"block"},{default:P(()=>[$(T,null,{default:P(()=>[F(u(g.$t("messages.shop.browseOurProducts")),1)]),_:1})]),_:1})])):(r(),p("form",{key:1,class:"container flex flex-wrap items-start gap-8 my-16 justify-evenly lg:gap-20",onSubmit:ye(J,["prevent"])},[t("div",Is,[!e(c)&&e(a).billing?(r(),p("div",Ds,[_[12]||(_[12]=t("h2",{class:"w-full mb-2 text-2xl font-semibold leading-none"}," Contact Information ",-1)),_[13]||(_[13]=t("p",{class:"mt-1 text-sm text-gray-500"},[F(" Already have an account? "),t("a",{href:"/my-account",class:"text-brand-gold text-semibold"},"Log in"),F(". ")],-1)),t("div",Ns,[t("label",Os,u(g.$t("messages.billing.email")),1),w(t("input",{"onUpdate:modelValue":_[0]||(_[0]=x=>e(a).billing.email=x),placeholder:"johndoe@email.com",autocomplete:"email",type:"email",name:"email",class:le({"has-error":e(E)}),onBlur:_[1]||(_[1]=x=>G(e(a).billing.email)),onInput:_[2]||(_[2]=x=>R(e(a).billing.email)),required:""},null,34),[[S,e(a).billing.email]]),$(Z,{name:"scale-y",mode:"out-in"},{default:P(()=>[e(E)?(r(),p("div",js," Invalid email address ")):y("",!0)]),_:1})]),e(f).createAccount?(r(),p(q,{key:0},[t("div",qs,[t("label",Hs,u(g.$t("messages.account.username")),1),w(t("input",{"onUpdate:modelValue":_[3]||(_[3]=x=>e(f).username=x),placeholder:"johndoe",autocomplete:"username",type:"text",name:"username",required:""},null,512),[[S,e(f).username]])]),e(f).createAccount?(r(),p("div",zs,[t("label",Bs,u(g.$t("messages.account.password")),1),$(L,{id:"password",class:"my-2",modelValue:e(f).password,"onUpdate:modelValue":_[4]||(_[4]=x=>e(f).password=x),placeholder:"••••••••••",required:!0},null,8,["modelValue"])])):y("",!0)],64)):y("",!0),e(c)?y("",!0):(r(),p("div",Gs,[_[11]||(_[11]=t("label",{for:"creat-account"},"Create an account?",-1)),w(t("input",{id:"creat-account","onUpdate:modelValue":_[5]||(_[5]=x=>e(f).createAccount=x),type:"checkbox",name:"creat-account"},null,512),[[pe,e(f).createAccount]])]))])):y("",!0),t("div",null,[t("h2",Rs,u(g.$t("messages.billing.billingDetails")),1),$(ke,{modelValue:e(a).billing,"onUpdate:modelValue":_[6]||(_[6]=x=>e(a).billing=x)},null,8,["modelValue"])]),e(n).availableShippingMethods.length>0?(r(),p("label",Ws,[t("span",null,u(g.$t("messages.billing.differentAddress")),1),w(t("input",{id:"shipToDifferentAddress","onUpdate:modelValue":_[7]||(_[7]=x=>e(f).shipToDifferentAddress=x),type:"checkbox",name:"shipToDifferentAddress"},null,512),[[pe,e(f).shipToDifferentAddress]])])):y("",!0),$(Z,{name:"scale-y",mode:"out-in"},{default:P(()=>[e(f).shipToDifferentAddress?(r(),p("div",Ys,[t("h2",Ks,u(g.$t("messages.general.shippingDetails")),1),$(Se,{modelValue:e(a).shipping,"onUpdate:modelValue":_[8]||(_[8]=x=>e(a).shipping=x)},null,8,["modelValue"])])):y("",!0)]),_:1}),e(n).availableShippingMethods.length?(r(),p("div",Fs,[t("h3",Zs,u(g.$t("messages.general.shippingSelect")),1),$(Ce,{options:e(n).availableShippingMethods[0].rates,"active-option":e(n).chosenShippingMethods[0]},null,8,["options","active-option"])])):y("",!0),(ue=e(h))!=null&&ue.nodes.length?(r(),p("div",Js,[t("h2",Xs,u(g.$t("messages.billing.paymentOptions")),1),$(Ve,{modelValue:e(f).paymentMethod,"onUpdate:modelValue":_[9]||(_[9]=x=>e(f).paymentMethod=x),class:"mb-4",paymentGateways:e(h)},null,8,["modelValue","paymentGateways"]),e(M)?w((r(),A(Ee,{key:0,stripe:e(M),onUpdateElement:U},null,8,["stripe"])),[[ze,e(f).paymentMethod.id=="stripe"]]):y("",!0)])):y("",!0),t("div",null,[t("h2",Qs,u(g.$t("messages.shop.orderNote"))+" ("+u(g.$t("messages.general.optional"))+") ",1),w(t("textarea",{id:"order-note","onUpdate:modelValue":_[10]||(_[10]=x=>e(f).customerNote=x),name:"order-note",class:"w-full min-h-[100px]",rows:"4",placeholder:g.$t("messages.shop.orderNotePlaceholder")},null,8,en),[[S,e(f).customerNote]])])]),$(Me,null,{default:P(()=>[t("button",{class:"flex items-center justify-center w-full gap-3 p-3 mt-4 font-semibold text-center text-white rounded-lg shadow-md bg-brand-gold hover:bg-brand-gold/[0.8] disabled:cursor-not-allowed disabled:bg-gray-400",disabled:e(se)},[F(u(e(N)),1),e(v)?(r(),A(de,{key:0,color:"#fff",size:"18"})):y("",!0)],8,tn)]),_:1})],32))],64)):(r(),A(de,{key:1,class:"m-auto"}))])}}});export{dn as default};
