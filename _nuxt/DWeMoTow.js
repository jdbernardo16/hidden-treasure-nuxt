import{d as q,a6 as T,ad as U,o as a,h as L,w as v,b as n,c as p,e,t as l,s as j,g as I,W as B,M as H,X as C,K as S,E as _,H as A,a as d,f as y,T as V,U as G,i as k,j as K,k as W,S as E}from"./ckhrBAmo.js";import{_ as z}from"./BHyxnSMX.js";const D=["src"],X={key:1,class:"flex items-center gap-2 text-lg font-bold"},F="/images/favicon3.png",J=q({__name:"Logo",setup($){var g,w;const{siteName:r}=T(),t=j(),c=U(),f=(g=t==null?void 0:t.public)!=null&&g.LOGO?c((w=t==null?void 0:t.public)==null?void 0:w.LOGO):null;return(u,m)=>{const i=I;return a(),L(i,{to:"/"},{default:v(()=>[n(f)?(a(),p("img",{key:0,src:n(f),alt:"Logo",class:"object-contain h-10"},null,8,D)):(a(),p("div",X,[e("img",{src:F,alt:"Logo",width:"32",height:"32"}),e("span",null,l(n(r)),1)]))]),_:1})}}}),Q=Object.assign(J,{__name:"Logo"}),Y={class:"max-w-lg mx-auto my-16 min-h-[600px] lg:my-24"},Z={class:"flex flex-col items-center"},ss={class:"text-xl font-semibold lg:text-3xl"},es={for:"password",class:"mb-4"},os={for:"confirmPassword",class:"mb-4"},ts={key:0,class:"text-sm mb-4"},ns=["innerHTML"],as={class:"flex items-center justify-center gap-4 mt-4 text-lg"},rs={class:"my-8 text-center cursor-pointer"},ls=q({__name:"ResetPassword",setup($){const{t:r}=B(),t=H(),c=C(),{viewer:f,resetPasswordWithKey:g,loginUser:w}=S(),u=_(""),m=_(""),i=_(""),b=_(!1),x=_(!1);!c.query.key&&!c.query.login&&t.push("/my-account?action=forgotPassword");const M=async()=>{try{if(i.value="",x.value=!1,b.value=!0,u.value!==m.value)throw new Error(r("messages.error.passwordMismatch"));const o={key:c.query.key,login:c.query.login,password:u.value};if(!o.key||!o.login)throw x.value=!0,new Error(r("messages.error.invalidPasswordResetLink"));const s=await g(o);if(!s.success)throw x.value=!0,new Error(s.error);if(f.value){const h=await w({username:o.login,password:o.password});if(!h.success)throw new Error(h.error)}t.push("/my-account")}catch(o){i.value=o.message||r("messages.error.general")}finally{b.value=!1}};return A({title:r("messages.account.resetPassword")}),(o,s)=>{const h=Q,N=z,R=I,O=W;return a(),p("div",Y,[e("div",Z,[d(h,{class:"mb-6 scale-125"}),e("h1",ss,l(o.$t("messages.account.resetPassword")),1)]),e("form",{class:"mt-6 flex flex-col",onSubmit:K(M,["prevent"])},[e("label",es,[y(l(o.$t("messages.account.newPassword"))+" ",1),s[2]||(s[2]=e("span",{class:"text-red-500"},"*",-1)),s[3]||(s[3]=e("br",null,null,-1)),d(N,{id:"password",className:" border rounded-lg w-full p-3 px-4 bg-white",modelValue:n(u),"onUpdate:modelValue":s[0]||(s[0]=P=>V(u)?u.value=P:null),placeholder:"New Password",required:!0},null,8,["modelValue"])]),e("label",os,[y(l(o.$t("messages.account.confirmNewPassword"))+" ",1),s[4]||(s[4]=e("span",{class:"text-red-500"},"*",-1)),s[5]||(s[5]=e("br",null,null,-1)),d(N,{id:"confirmPassword",className:"border rounded-lg w-full p-3 px-4 bg-white",modelValue:n(m),"onUpdate:modelValue":s[1]||(s[1]=P=>V(m)?m.value=P:null),placeholder:"Confirm Password",required:!0},null,8,["modelValue"])]),d(G,{name:"scale-y",mode:"out-in"},{default:v(()=>[n(i)?(a(),p("div",ts,[e("span",{class:"text-red-500",innerHTML:n(i)},null,8,ns),n(x)?(a(),L(R,{key:0,class:"underline cursor-pointer pl-1",to:"/my-account?action=forgotPassword"},{default:v(()=>[y(l(o.$t("messages.account.requestNewLink")),1)]),_:1})):k("",!0)])):k("",!0)]),_:1}),e("button",as,[n(b)?(a(),L(O,{key:0,stroke:"4",size:"16",color:"#fff"})):k("",!0),e("span",null,l(o.$t("messages.account.resetPassword")),1)])],32),e("div",rs,[d(R,{to:"/my-account"},{default:v(()=>[y(l(o.$t("messages.account.backToLogin")),1)]),_:1})])])}}}),cs=Object.assign(E(ls,[["__scopeId","data-v-6e04864a"]]),{__name:"ResetPassword"}),us={},is={class:"container min-h-[600px]"};function ds($,r){const t=cs;return a(),p("div",is,[d(t)])}const ps=E(us,[["render",ds]]);export{ps as default};
